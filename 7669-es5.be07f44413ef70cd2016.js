!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function o(n,o,i){return o&&t(n.prototype,o),i&&t(n,i),n}(self.webpackChunkion_tk_social_network=self.webpackChunkion_tk_social_network||[]).push([[7669],{57669:function(t,i,e){"use strict";e.r(i),e.d(i,{MainPageModule:function(){return Q}});var r=e(61116),s=e(75425),a=e(6921),c=e(57476),g=e(39238),u=e(64762),l=e(74249),p=e(61071),d=e(9153),f=e(95898),Z=e(55906),m=e(33316);function h(n,t){1&n&&(m.ynx(0),m.TgZ(1,"ion-item",4),m._UZ(2,"ion-skeleton-text",5),m.qZA(),m.TgZ(3,"div",6),m.TgZ(4,"ion-text",7),m._UZ(5,"ion-skeleton-text",8),m.qZA(),m.qZA(),m.BQk())}var x=function(){return{seen:!1}};function v(n,t){if(1&n&&(m.ynx(0),m.TgZ(1,"ion-item",4),m.TgZ(2,"ion-avatar",9),m._UZ(3,"ion-img",10),m.qZA(),m.qZA(),m.TgZ(4,"div",6),m.TgZ(5,"ion-text",7),m._uU(6),m.qZA(),m.qZA(),m.BQk()),2&n){var o=m.oxw().$implicit;m.xp6(2),m.Q6J("ngClass",m.DdM(3,x)),m.xp6(1),m.Q6J("src",o.avatar),m.xp6(3),m.hij(" ",o.firstName," ")}}function y(n,t){if(1&n){var o=m.EpF();m.TgZ(0,"ion-list",2),m.NdJ("click",function(n){var t=m.CHM(o).$implicit;return m.oxw().openStory(n,t)}),m.YNc(1,h,6,0,"ng-container",3),m.YNc(2,v,7,4,"ng-container",3),m.qZA()}if(2&n){var i=t.$implicit;m.xp6(1),m.Q6J("ngIf",i.skeleton),m.xp6(1),m.Q6J("ngIf",!i.skeleton)}}var b=function(){var t=function(){function t(){n(this,t),this.isLoading=!0,this.onOpenStory=new m.vpe}return o(t,[{key:"openStory",value:function(n,t){this.onOpenStory.emit(t)}},{key:"trackByStory",value:function(n){return n}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-users-stories"]],inputs:{isLoading:"isLoading",stories:"stories"},outputs:{onOpenStory:"onOpenStory"},decls:2,vars:2,consts:[["scrollX","true",1,"stories-card"],["lines","none","class","story-list",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["lines","none",1,"story-list",3,"click"],[4,"ngIf"],["lines","none",1,"story-item"],[2,"height","64px","width","64px","border-radius","50%","margin","auto"],[1,"story-author"],["color","primary"],[2,"width","80%","margin","auto"],[1,"story-avatar",3,"ngClass"],[3,"src"]],template:function(n,t){1&n&&(m.TgZ(0,"ion-card",0),m.YNc(1,y,3,2,"ion-list",1),m.qZA()),2&n&&(m.xp6(1),m.Q6J("ngForOf",t.stories)("ngForTrackBy",t.trackByStory))},directives:[l.PM,r.sg,l.q_,r.O5,l.Ie,l.CK,l.yW,l.BJ,r.mk,l.Xz],styles:[".stories-card[_ngcontent-%COMP%]{margin:16px 0 0;margin-top:var(--ion-margin,16px);border-radius:0}.stories-card[_ngcontent-%COMP%]   .story-list[_ngcontent-%COMP%]{--background:inherit;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;background:initial;padding-top:0;padding-bottom:0}.stories-card[_ngcontent-%COMP%]   .story-item[_ngcontent-%COMP%]{--inner-padding-bottom:0px;--inner-padding-end:0px;--inner-padding-start:0px;--inner-padding-top:0px;--padding-end:0px;--padding-start:0px;--background:inherit;margin:8px;margin:var(--ion-margin,8px);transition:all .1s ease-in-out}.stories-card[_ngcontent-%COMP%]   .story-item[_ngcontent-%COMP%]:active{transform:scale(1.1)}.stories-card[_ngcontent-%COMP%]   .story-avatar[_ngcontent-%COMP%]{background:var(--ion-color-primary);height:64px;width:64px;padding:2px;margin-top:0;margin-bottom:0}.stories-card[_ngcontent-%COMP%]   .story-avatar.seen[_ngcontent-%COMP%]{background:var(--ion-color-light)}.stories-card[_ngcontent-%COMP%]   .story-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid #fff;border:2px solid var(--background,#fff);border-radius:50%}.stories-card[_ngcontent-%COMP%]   .story-author[_ngcontent-%COMP%]{text-align:center;margin-bottom:8px;margin-bottom:var(--ion-margin,8px)}"]}),t}();function k(n,t){if(1&n&&(m.TgZ(0,"ion-col",2),m.TgZ(1,"ion-card",3),m.TgZ(2,"ion-item",4),m.TgZ(3,"ion-avatar",5),m._UZ(4,"img",6),m.qZA(),m.TgZ(5,"ion-label"),m._uU(6),m.TgZ(7,"p"),m._uU(8,"two minutes ago"),m.qZA(),m.qZA(),m.TgZ(9,"ion-buttons",7),m.TgZ(10,"ion-button",8),m._UZ(11,"ion-icon",9),m.qZA(),m.qZA(),m.qZA(),m._UZ(12,"img",6),m.TgZ(13,"ion-card-content",10),m._uU(14),m.qZA(),m.TgZ(15,"ion-item",11),m.TgZ(16,"ion-buttons",5),m.TgZ(17,"ion-button",8),m._UZ(18,"ion-icon",12),m.TgZ(19,"small"),m._uU(20),m.qZA(),m.qZA(),m.TgZ(21,"ion-button",8),m._UZ(22,"ion-icon",13),m.TgZ(23,"small"),m._uU(24),m.qZA(),m.qZA(),m.TgZ(25,"ion-button",8),m._UZ(26,"ion-icon",14),m.TgZ(27,"small"),m._uU(28),m.qZA(),m.qZA(),m.qZA(),m.TgZ(29,"ion-buttons",7),m.TgZ(30,"ion-button",8),m._UZ(31,"ion-icon",15),m.TgZ(32,"small"),m._uU(33),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&n){var o=t.$implicit;m.xp6(4),m.Q6J("src",o.avatar,m.LSH),m.xp6(2),m.AsE(" ",o.firstName," ",o.lastName," "),m.xp6(6),m.Q6J("src",o.image,m.LSH),m.xp6(2),m.hij(" ",o.content," "),m.xp6(6),m.Oqu(o.likes),m.xp6(4),m.Oqu(o.comments),m.xp6(4),m.Oqu(o.shared),m.xp6(5),m.Oqu(o.views)}}function A(n,t){if(1&n&&(m.ynx(0),m.YNc(1,k,34,9,"ion-col",1),m.BQk()),2&n){var o=m.oxw();m.xp6(1),m.Q6J("ngForOf",o.posts)("ngForTrackBy",o.trackByPost)}}function T(n,t){1&n&&(m.TgZ(0,"ion-col",2),m.TgZ(1,"ion-card",3),m.TgZ(2,"ion-item",4),m.TgZ(3,"ion-avatar",5),m._UZ(4,"ion-skeleton-text",17),m.qZA(),m.TgZ(5,"ion-label"),m._UZ(6,"ion-skeleton-text",18),m.TgZ(7,"p"),m._UZ(8,"ion-skeleton-text",19),m.qZA(),m.qZA(),m.qZA(),m._UZ(9,"ion-skeleton-text",20),m.TgZ(10,"ion-card-content",10),m._UZ(11,"ion-skeleton-text",21),m.qZA(),m.TgZ(12,"ion-item",11),m.TgZ(13,"ion-buttons",5),m.TgZ(14,"ion-button",8),m._UZ(15,"ion-skeleton-text",22),m.qZA(),m.TgZ(16,"ion-button",8),m._UZ(17,"ion-skeleton-text",22),m.qZA(),m.TgZ(18,"ion-button",8),m._UZ(19,"ion-skeleton-text",22),m.qZA(),m.qZA(),m.TgZ(20,"ion-buttons",7),m.TgZ(21,"ion-button",8),m._UZ(22,"ion-skeleton-text",22),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA())}var _=function(){return[1,2,3,4]};function q(n,t){1&n&&(m.ynx(0),m.YNc(1,T,23,0,"ion-col",16),m.BQk()),2&n&&(m.xp6(1),m.Q6J("ngForOf",m.DdM(1,_)))}var w=function(){var t=function(){function t(){n(this,t),this.isLoading=!0}return o(t,[{key:"trackByPost",value:function(n){return n}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-users-posts"]],inputs:{isLoading:"isLoading",posts:"posts"},decls:3,vars:2,consts:[[4,"ngIf"],["size","12","size-md","6","offsetMd","3","size-lg","4","offsetLg","4","class","ion-no-padding",4,"ngFor","ngForOf","ngForTrackBy"],["size","12","size-md","6","offsetMd","3","size-lg","4","offsetLg","4",1,"ion-no-padding"],[1,"post-list-card"],["lines","none"],["slot","start"],[3,"src"],["slot","end"],["color","medium"],["slot","icon-only","md","ellipsis-vertical-outline","ios","ellipsis-horizontal-outline"],[1,"post-list-content"],["lines","none",1,"ion-no-padding",2,"margin-left","10px"],["slot","start","name","heart-outline"],["slot","start","name","chatbox-outline"],["slot","start","name","return-up-forward-outline"],["size","small","slot","start","name","eye-outline"],["size","12","size-md","6","offsetMd","3","size-lg","4","offsetLg","4","class","ion-no-padding",4,"ngFor","ngForOf"],[2,"width","100%","height","100%","border-radius","50%"],[2,"width","50%"],[2,"width","100%"],[2,"width","100%","height","200px"],[2,"width","100%","height","50px"],[2,"width","32px","height","32px","border-radius","50%"]],template:function(n,t){1&n&&(m.TgZ(0,"ion-row"),m.YNc(1,A,2,2,"ng-container",0),m.YNc(2,q,2,2,"ng-container",0),m.qZA()),2&n&&(m.xp6(1),m.Q6J("ngIf",!t.isLoading),m.xp6(1),m.Q6J("ngIf",t.isLoading))},directives:[l.Nd,r.O5,r.sg,l.wI,l.PM,l.Ie,l.BJ,l.Q$,l.Sm,l.YG,l.gu,l.FN,l.CK],styles:["[_nghost-%COMP%]:last-child{margin-bottom:32px;margin-bottom:var(--ion-margin,32px)}.post-list-card[_ngcontent-%COMP%]{margin-top:16px;margin-top:var(--ion-margin,16px);margin-left:0;margin-right:0;margin-bottom:0;border-radius:0}.post-list-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end:0px;--background:inherit}.post-list-card[_ngcontent-%COMP%]   .post-list-content[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}.post-list-card[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin-right:16px!important;margin-right:var(--ion-margin,16px)!important}"]}),t}(),O=e(85649);function C(n,t){1&n&&(m.TgZ(0,"ion-segment-button"),m.TgZ(1,"ion-label"),m._UZ(2,"ion-skeleton-text",18),m.qZA(),m.qZA())}function M(n,t){if(1&n&&(m.TgZ(0,"ion-segment-button",19),m.TgZ(1,"ion-label"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()),2&n){var o=m.oxw().$implicit;m.Q6J("value",o.name),m.xp6(2),m.Oqu(m.lcZ(3,2,"mainTabs."+o.name))}}function P(n,t){if(1&n&&(m.ynx(0),m.YNc(1,C,3,0,"ion-segment-button",16),m.YNc(2,M,4,4,"ion-segment-button",17),m.BQk()),2&n){var o=t.$implicit;m.xp6(1),m.Q6J("ngIf",o.skeleton),m.xp6(1),m.Q6J("ngIf",!o.skeleton)}}var U,J,N=[{path:"",component:(U=function(){function t(o,i){n(this,t),this.store=o,this.menuController=i}return o(t,[{key:"trackBy",value:function(n){return n}},{key:"toggleCameraMenu",value:function(){console.log("toggleCameraMenu"),this.menuController.toggle("camera")}},{key:"doRefresh",value:function(n){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,d.n)(this.store.dispatch(new f.Nw.FetchNews(1,!0)));case 2:return n.next=4,this.ionRefresher.complete();case 4:case"end":return n.stop()}},n,this)}))}},{key:"loadDataNewsPagination",value:function(n){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.store.selectSnapshot(function(n){return n.main.news.activePage}),n.next=3,(0,d.n)(this.store.dispatch(new f.Nw.FetchNews(t+1)));case 3:return n.next=5,this.infiniteScroll.complete();case 5:case"end":return n.stop()}},n,this)}))}},{key:"ngOnInit",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},n)}))}},{key:"ionViewDidEnter",value:function(){var n=this.store.selectSnapshot(function(n){return n.main.news.activePage});this.store.dispatch([new f.NR.FetchMainTabs,new f.oz.FetchStories,new f.Nw.FetchNews(n)]),this.menuController.enable(!0,"camera")}},{key:"ionViewDidLeave",value:function(){this.menuController.enable(!1,"camera")}}]),t}(),U.\u0275fac=function(n){return new(n||U)(m.Y36(p.yh),m.Y36(l._q))},U.\u0275cmp=m.Xpm({type:U,selectors:[["app-main"]],viewQuery:function(n,t){var o;1&n&&(m.Gf(l.W2,5),m.Gf(l.nJ,5),m.Gf(l.ju,5)),2&n&&(m.iGM(o=m.CRH())&&(t.ionContent=o.first),m.iGM(o=m.CRH())&&(t.ionRefresher=o.first),m.iGM(o=m.CRH())&&(t.infiniteScroll=o.first))},decls:27,vars:17,consts:[[3,"translucent"],["slot","start"],["color","primary",3,"click"],["slot","icon-only","name","camera-outline"],["slot","end"],["color","primary"],["slot","icon-only","name","search-outline"],["slot","icon-only","name","notifications-outline"],[1,"ion-no-padding"],["mode","md","scrollable","","value","news"],[4,"ngFor","ngForOf","ngForTrackBy"],["slot","fixed","pullFactor","0.5","pullMin","50","pullMax","100",3,"ionRefresh"],[3,"stories"],[3,"posts","isLoading"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","lines"],[4,"ngIf"],[3,"value",4,"ngIf"],[2,"width","70px"],[3,"value"]],template:function(n,t){1&n&&(m.TgZ(0,"ion-header",0),m.TgZ(1,"ion-toolbar"),m.TgZ(2,"ion-buttons",1),m.TgZ(3,"ion-button",2),m.NdJ("click",function(){return t.toggleCameraMenu()}),m._UZ(4,"ion-icon",3),m.qZA(),m.qZA(),m.TgZ(5,"ion-title"),m._uU(6),m.ALo(7,"translate"),m.qZA(),m.TgZ(8,"ion-buttons",4),m.TgZ(9,"ion-button",5),m._UZ(10,"ion-icon",6),m.qZA(),m.TgZ(11,"ion-button",5),m._UZ(12,"ion-icon",7),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"ion-toolbar",8),m.TgZ(14,"ion-segment",9),m.YNc(15,P,3,2,"ng-container",10),m.ALo(16,"async"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"ion-content"),m.TgZ(18,"ion-refresher",11),m.NdJ("ionRefresh",function(n){return t.doRefresh(n)}),m._UZ(19,"ion-refresher-content"),m.qZA(),m._UZ(20,"app-users-stories",12),m.ALo(21,"async"),m._UZ(22,"app-users-posts",13),m.ALo(23,"async"),m.ALo(24,"async"),m.TgZ(25,"ion-infinite-scroll",14),m.NdJ("ionInfinite",function(n){return t.loadDataNewsPagination(n)}),m._UZ(26,"ion-infinite-scroll-content",15),m.qZA(),m.qZA()),2&n&&(m.Q6J("translucent",!0),m.xp6(6),m.Oqu(m.lcZ(7,7,"bottomTabs.main")),m.xp6(9),m.Q6J("ngForOf",m.lcZ(16,9,t.tabs$))("ngForTrackBy",t.trackBy),m.xp6(5),m.Q6J("stories",m.lcZ(21,11,t.stories$)),m.xp6(2),m.Q6J("posts",m.lcZ(23,13,t.news$))("isLoading",m.lcZ(24,15,t.newsIsLoading$)))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.cJ,l.QI,r.sg,l.W2,l.nJ,l.Wo,b,w,l.ju,l.MB,r.O5,l.GO,l.Q$,l.CK],pipes:[O.X$,r.Ov],styles:[""]}),(0,u.gn)([(0,p.Ph)((0,p.P1)([Z.gI],function(n){return n.tabs.isLoading?Array(10).fill({skeleton:!0}):n.tabs.listData}))],U.prototype,"tabs$",void 0),(0,u.gn)([(0,p.Ph)((0,p.P1)([Z.gI],function(n){return n.stories.isLoading?Array(10).fill({skeleton:!0}):n.stories.listData}))],U.prototype,"stories$",void 0),(0,u.gn)([(0,p.Ph)((0,p.P1)([Z.gI],function(n){return n.news.pages.map(function(t){return n.news.listData[t]}).reduce(function(n,t){return n.concat(t)},[])}))],U.prototype,"news$",void 0),(0,u.gn)([(0,p.Ph)((0,p.P1)([Z.gI],function(n){return n.news.isLoading}))],U.prototype,"newsIsLoading$",void 0),U)}],L=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[g.Bz.forChild(N)],g.Bz]}),t}(),Q=((J=function t(){n(this,t)}).\u0275fac=function(n){return new(n||J)},J.\u0275mod=m.oAB({type:J}),J.\u0275inj=m.cJS({imports:[[r.ez,L,a.H,c.i,s.m]]}),J)}}])}();